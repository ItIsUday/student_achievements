{% extends "users/layout.html" %}

{% block body %}
    <style>
        input,select{
            max-width:10em;
            margin-right:9px;
        }
    </style>
    <div style="text-align: center;">
        <h3>Student Achievement Portal<br><br></h3>
        <table class="table table-striped table-bordered">
            <tr>
                <td><h4>Name: {{ name }}</h4></td>
                <td><h4>ID: {{ id }}</h4></td>
                <td><h4>User: {{ user_type }}</h4></td>
            </tr>
            <tr>
                <td><h5>Username: {{ request.user.username }}</h5></td>
                <td><h5>Email: {{ request.user.email }}</h5></td>
                <td><a href="{% url 'logout' %}" class="btn btn-outline-danger">Log Out</a></td>
            </tr>
        </table>
        <br><br><br>

        <h2>Student Achievements</h2><br>
        <form method="post">
            {% csrf_token %}
            <div class="input-group">
                <input name="usn" value="{{ usn }}" placeholder="USN" class="form-control" style="margin-left:300px;"/>
                <input name="year" value="{{ year }}" placeholder="year" class="form-control" />
                <input name="type" value="{{ type }}" placeholder="type" class="form-control" />
                <input name="organization" value="{{ org }}" placeholder="organization" class="form-control" />
                <select name="sortby" class="form-control" style="max-width:10em;">
                    <option value="" disabled selected>Sort By</option>
                    <option value="achievement_date">Achievement Date</option>
                    <option value="title">Title</option>
                    <option value="type">Type</option>
                    <option value="organization">Organization</option>
                </select>
                <input type="checkbox" name="my_mentees" class="form-check-input" />
                <label for="my_mentees" class="form-check-label">My Mentees Only</label>
            </div>
            <br>
            <button type="submit" class="btn btn-dark">Query</button>
            <a href="{% url 'index' %}" class="btn btn-secondary">See All Achievements</a>
        </form>
        <br><br>
        <h4>Count: {{ achievements.count }}</h4>
    </div>

    {% if achievements %}
    <div class="grid-header cols-counselor" style="margin-right: 5px;">
        <div class="item">ACH_ID</div>
        <div class="item">Title</div>
        <div class="item">Held by</div>
        <div class="item">Event Date</div>
        <div class="item">Type</div>
        <div class="item">Academic Year</div>
        <div class="item">Awarded By</div>
        <div class="item">Certficate</div>
    </div>

    {% for a,link in achievements_links %}
        <div class="grid-container cols-counselor" style="margin-right: 5px;">
            <div class="grid-item">{{ a.id }}</div>
            <div class="grid-item">{{ a.title }}</div>
            <div class="grid-item">
                {% if a.holders.all %}
                {% for h in a.holders.all %}
                    {{ h }}<br>
                {% endfor %}
                {% else %}
                <p style="color: #aaa;">No members</p>
                {% endif %}
            </div>
            <div class="grid-item">{{ a.achievement_date }}</div>
            <div class="grid-item">{{ a.type }}</div>
            <div class="grid-item">{{ a.academic_year }}</div>
            <div class="grid-item">{{ a.organization.name }}</div>  
            <div class="grid-item">
                <a href="{{ a.certificate.url }}">link</a>
            </div>
        </div>
    {% endfor %}
    {% else %}
    <br><br>
    <h2 style="text-align:center;">No Achievements</h2>
    {% endif %}
    <br><br>
{% endblock %}